download() {
    [ -f gtkdialog-0.8.4e.tar.xz ] || wget -t 3 -T 60 -O gtkdialog-0.8.4e.tar.gz https://github.com/puppylinux-woof-CE/gtkdialog/archive/0.8.4e.tar.gz
}

build() {
    tar -xzf gtkdialog-0.8.4e.tar.gz
    patch -d gtkdialog-0.8.4e -p1 < 125.patch
    patch -d gtkdialog-0.8.4e -p1 < 132.patch
    if [ $PETBUILD_GTK -eq 3 ]; then
        cp -r gtkdialog-0.8.4e gtk2dialog-0.8.4e

        cd gtkdialog-0.8.4e
        ./autogen.sh --prefix=/usr --bindir=/usr/sbin --enable-gtk3
        make install

        # a GTK+ 2 build for legacy applications that cannot be migrated to GTK+ 3 easily
        cd ../gtk2dialog-0.8.4e
        ./autogen.sh --prefix=/usr --bindir=/usr/sbin
        make -C src gtkdialog
        install -m 755 src/gtkdialog /usr/sbin/gtk2dialog
    else
        cd gtkdialog-0.8.4e
        ./autogen.sh --prefix=/usr --bindir=/usr/sbin
        make install
        ln -s gtkdialog /usr/sbin/gtk2dialog
    fi
}
